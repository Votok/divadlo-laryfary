<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% if fullTitle %}{{ fullTitle }}{% elif title %}{{ title }} - Divadlo Láryfáry{% else %}Divadlo Láryfáry{% endif %}</title>
    <meta name="description" content="{{ description or 'Divadlo Láryfáry - jsme pražské profesionální autorské divadlo, v současné době zaměřené především na dětského diváka.' }}" />
    <meta name="keywords" content="{{ keywords or 'dětské divadlo, divadlo pro děti, představení, dětské hry, divadlo Láryfáry, pohádka, pohádky, dětské představení' }}" />
    <meta name="author" content="Jan Votoček" />

    {# Canonical URL #}
    {% if page and page.url %}<link rel="canonical" href="{{ site.url }}{{ page.url }}" />{% endif %}

    {# Open Graph & Twitter #}
    {% if fullTitle %}{% set ogTitle = fullTitle %}{% elif title %}{% set ogTitle = title + ' - Divadlo Láryfáry' %}{% else %}{% set ogTitle = 'Divadlo Láryfáry' %}{% endif %}
    {% set ogDescription = description or 'Divadlo Láryfáry - pražské profesionální autorské divadlo zaměřené na dětského diváka.' %}
    {% if not ogImage %}{% set ogImage = site.ogImage %}{% endif %}
    {% if ogImage %}
      {% if ogImage | first == '/' %}
        {% set absOgImage = site.url + ogImage %}
      {% elseif '://' in ogImage %}
        {% set absOgImage = ogImage %}
      {% else %}
        {% set absOgImage = site.url + '/' + ogImage %}
      {% endif %}
    {% endif %}
    <meta property="og:locale" content="{{ site.locale }}" />
    <meta property="og:site_name" content="{{ site.name }}" />
    <meta property="og:title" content="{{ ogTitle }}" />
    <meta property="og:description" content="{{ ogDescription }}" />
    <meta property="og:type" content="website" />
    {% if page and page.url %}<meta property="og:url" content="{{ site.url }}{{ page.url }}" />{% endif %}
  {% if absOgImage %}
  <meta property="og:image" content="{{ absOgImage }}" />
  <meta property="og:image:alt" content="{{ ogTitle }}" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:type" content="image/jpeg" />
  {% endif %}
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="{{ ogTitle }}" />
    <meta name="twitter:description" content="{{ ogDescription }}" />
    {% if absOgImage %}<meta name="twitter:image" content="{{ absOgImage }}" />{% endif %}
    {% if site.twitter and site.twitter != '@' %}<meta name="twitter:site" content="{{ site.twitter }}" />{% endif %}

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  {# Bundle: write CSS to a hashed file and include it #}
  <link rel="stylesheet" href="{% getBundleFileUrl 'css' %}" />

  <!-- Favicon (SVG). Optionally add PNG + ICO variants later -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="theme-color" content="#e93578" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet" />

    {# Preload hero image when specified in front matter #}
    {% if preloadImage %}
    <link rel="preload" as="image" href="{{ preloadImage }}" />
    {% endif %}

    {# ── Structured Data (JSON-LD) ── #}

    {# Site-wide Organization / TheaterGroup #}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TheaterGroup",
      "name": "Divadlo Láryfáry",
      "url": "{{ site.url }}",
      "logo": "{{ site.url }}/images/og-default.jpg",
      "description": "{{ site.description }}",
      "foundingDate": "2008",
      "email": "info@divadlolaryfary.cz",
      "telephone": "+420608823463",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Praha",
        "addressCountry": "CZ"
      },
      "sameAs": [
        "https://www.instagram.com/divadlolaryfary/",
        "https://www.facebook.com/divadlolaryfary"
      ]
    }
    </script>

    {# BreadcrumbList JSON-LD for pages with breadcrumbs #}
    {% if breadcrumbs %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {% for crumb in breadcrumbs %}
        {
          "@type": "ListItem",
          "position": {{ loop.index }},
          {% if crumb.url %}
          "name": "{{ crumb.title }}",
          "item": "{{ site.url }}/{{ crumb.url }}"
          {% else %}
          "name": "{{ crumb.title }}"
          {% endif %}
        }{% if not loop.last %},{% endif %}
        {% endfor %}
      ]
    }
    </script>
    {% endif %}

    {# CreativeWork JSON-LD for show (pohádka) pages #}
    {% if breadcrumbs and permalink and permalink | isShowPage %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CreativeWork",
      "name": "{{ title }}",
      "description": "{{ description }}",
      "url": "{{ site.url }}{{ page.url }}",
      "genre": "Dětské divadlo",
      "inLanguage": "cs",
      "creator": {
        "@type": "TheaterGroup",
        "name": "Divadlo Láryfáry",
        "url": "{{ site.url }}"
      },
      "audience": {
        "@type": "PeopleAudience",
        "audienceType": "Děti",
        "suggestedMinAge": {{ ageFrom or 4 }}
      }
    }
    </script>
    {% endif %}
  </head>
  <body id="top">
    <div class="site-wrapper">
  {# Add the source CSS into the css bundle #}
  {% css %}
  {{ 'src/css/style.css' | readFile | safe }}
  {% endcss %}
      {% include "components/header.njk" %}
      
      <!-- Hero Banner - always shown -->
      <section class="hero-banner"></section>
      
      {% block pageHeader %}{% endblock %}
      
      <main class="main-content">
        {{ content | safe }}
      </main>

      {% include "components/footer.njk" %}
      {% include "components/bottom-nav.njk" %}

      <!-- Bootstrap JS -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
      
    </div>
    <button type="button" class="scroll-to-top" aria-label="Zpět nahoru">▲</button>
    <script>
      (function() {
        const btn = document.querySelector('.scroll-to-top');
        if(!btn) return;
        const toggle = () => {
          if(window.scrollY > 400) btn.classList.add('visible'); else btn.classList.remove('visible');
        };
        window.addEventListener('scroll', toggle, { passive: true });
        toggle();
        btn.addEventListener('click', () => {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      })();
    </script>
  </body>
</html>
